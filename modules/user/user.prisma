model PrismaUser {
    address                 String              @id

    userSnapshots           PrismaUserBalanceSnapshot[]

    walletBalances          PrismaUserWalletBalance[]
    stakedBalances          PrismaUserStakedBalance[]
}

model PrismaUserWalletBalance {
    id                      String              @id
    balance                 String
    balanceNum              Float
    updatedAt               DateTime            @updatedAt

    userAddress             String
    user                    PrismaUser          @relation(fields:[userAddress], references: [address])

    poolId                  String?
    pool                    PrismaPool?         @relation(fields:[poolId], references: [id])

    tokenAddress            String
    token                   PrismaToken         @relation(fields:[tokenAddress], references: [address])
}


model PrismaUserStakedBalance {
    id                      String              @id
    balance                 String
    balanceNum              Float
    updatedAt               DateTime            @updatedAt

    userAddress             String
    user                    PrismaUser          @relation(fields:[userAddress], references: [address])

    poolId                  String?
    pool                    PrismaPool?          @relation(fields:[poolId], references: [id])

    tokenAddress            String
    token                   PrismaToken         @relation(fields:[tokenAddress], references: [address])

    stakingId               String
    staking                 PrismaPoolStaking   @relation(fields:[stakingId], references: [id])
}

model PrismaUserBalanceSyncStatus {
    type                PrismaUserBalanceType @id
    blockNumber         Int
}

enum PrismaUserBalanceType {
    WALLET
    STAKED
}

model PrismaUserBalanceSnapshot {
    id                      String              @id
    userAddress             String
    user                    PrismaUser          @relation(fields:[userAddress], references: [address])
    timestamp               Int

    userPoolBalanceSnapshots PrismaUserPoolBalanceSnapshot[]
}

model PrismaUserPoolBalanceSnapshot {
    id                      String              @id

    userBalanceSnapshotId   String
    userBalanceSnapshot     PrismaUserBalanceSnapshot @relation(fields:[userBalanceSnapshotId], references:[id])

    poolId                  String
    pool                    PrismaPool          @relation(fields:[poolId], references:[id])

    walletBalance           String
    gaugeBalance            String
    farmBalance             String
    totalBalance            String
}
